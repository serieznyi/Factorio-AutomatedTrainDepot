# Депо поездов

## Цель

Ускорение процесса введения в эксплуатацию новых составов

## Описание постройки

Здание с двумя путями - на вход и выход.

Пути на выход упираются в *светофор* для контроля вывода состава из депо.

Пути на вход начинаются со *светофора* для контроля возможности принятия состава

Для функционирования здания в него необходимо передавать все необходимое для формирования состава:
- локомотивы
- вагоны
- топливо
- оборудование

Логическая сеть принимает сигналы для управления депо

Логическая сеть возвращает ряд сигналов

## Сигналы логической сети

Выход:
- Отсутствует локомотив для формирования состава
- Отсутствует вагон для формирования состава
- Отсутствует оборудование для формирования состава
- Отсутствует топливо для формируемого состава
- Состав не может покинуть депо (более 15 секунд)
- Количество составов в помеченной группе. Меткой группы выступает символ 0-9 A-Z. Метку выбирает пользователь.
- Количество локомотивов каждого типа
- Количество вагонов каждого типа
- Количество топлива каждого типа

Вход:
- Остановить производство составов
- Остановить отправку составов
- Остановить принятие составов на разборку
- Запланированное количество составов для N-й группы. Меткой группы выступает символ 0-9 A-Z. Метку выбирает пользователь.

## Интерфейс

TODO

## Вывод в консоль
Есть возможность выводить в консоль: warning, info, debug сообщения
- critical:
    - warnings:
        - отсутствуют компоненты для постройки состава
        - состав <название группы> (<ID>) не может покинуть депо
        - состав <название группы> (<ID>) не может попасть на станцию очистки
        - состав <название группы> (<ID>) не может попасть в депо
    - info:
        - asd
    - debug:
        - состав <название группы> (<ID>) прибыл в депо на расформирование
        - состав <название группы> (<ID>) расформирован
        - состав <название группы> (<ID>) сформирован
        - состав <название группы> (<ID>) покинул депо
        - состав <название группы> (<ID>) прибыл на станцию очистки
        - состав <название группы> (<ID>) покинул станцию очистки

[Settings] Уровень выводимых уведомления: errors && warning, info, debug (Как в LTN)

## Описание возможностей

Депо имеет свой инвентарь

В депо можно задавать неограниченное (ограничение движка, или может реально ограничить ?) количество групп.

В группе можно/нужно указать
- название (зачем?). По умолчанию используется generic название [*]
- информацию о структуре состава. Длина состава ограничена мощностью локомотивов. [*] Обязателен один локомотив. [Validate] locomotive is required
    - локомотив
    - вагоны
    - типа топлива для локомотива
    - оборудование для локомотива
- количество составов, которое должно быть создано [*] [Validation] Min = 1
- активность контроля количества поездов [Default] false
- цвет локомотивов. по умолчанию используется (оригинальный цвет) or (уникальный цвет для каждой группы)

Есть отображение всех поездов созданных из текущей группы с расположением и возможностью отозвать конкретный поезд
в депо (отображение как в ваниле список поездов)

Все поезда созданные вне депо отображаются в отдельной группе. За ними так же можно следить и призвать на разборку

`CONSTRUCT_SECONDS` - количество секунд, которое равно времени создания всех используемых компонентов
(каждый локомотив + каждый вагон + каждый компонент)

[Settings] Время разбора/сбора состава по умолчанию [Checkbox] [Default] true
[Settings] Время разбора состава [Min] 1 sec
[Settings] Время разбора состава [Max] 60 sec

Конфигурацию можно клонировать

### Ввод в эксплуатацию новых составов

Депо может собирать за раз только один поезд

Время создания состава `CONSTRUCT_SECONDS` секунд

После создания новой группы нам необходимо добавить локомотив в состав.
В процессе сборки состава в строке состояния группы указывается информация о ее готовности.
По умолчанию контроль кол-ва составов в группе выключено.
При каждом изменении настроек группы - старые поезда отправляются на расформирование.

Так же есть возможность задать топливо, которым мы хотим заправить поезд. Или выбрать Any.

[Settings] Заправлять поезд любым из доступных видов топлива. true/false

### Расформирование составов

Обязательно необходимо указать станцию очистки для всех поездов.
Это станция на которую отправятся не пустые составы в момент запроса на расформирование.
До тех пор отправка на разбор будет недоступна для не пустых поездов.

[Console][Debug] Состав <ID> не может попасть в депо по причине наличия груза

[Console][Debug] 10 из 12 составов группы <NAME> отправлены в депо на разборку

Есть кнопка отправки *всех поездов группы* в депо на разборку

На разборку может отправиться только пустой поезд.

На разборку поезда отправляются после посещения станции **очистки**

Отправка поездов на разборку - является добавление составам станции [clean-station],
а за ней как конечной - [depo-deconstruction-station]

[Settings] По сколько поездов за раз отравлять на разборку. [Default] 3

Депо вмещает только один состав на разборку

Депо разбирает один состав CONSTRUCT_SECONDS секунд

### Прогрессия в дереве развития

- Количество парковочных мест (отдельно на вход и выход?)
- количество линий (отдельно на сборку и разборку?)
- скорость сборки и разборки
- количество групп  